@model milkrate.Models.Piece

@{
    ViewData["Title"] = "Details";
}
@inject Microsoft.AspNetCore.Identity.SignInManager<ApplicationUser> SignInManager

<script src="https://code.highcharts.com/highcharts.js"></script>


<div>
    <h4>@Html.DisplayFor(model => model.Title)</h4>
    <hr />
    <div class="d-flex justify-content-around flex-wrap" style="margin-bottom: 3rem;">
        <div style=" max-width: 400px;">
            <img class="card-img-top img-fluid" src="@Html.DisplayFor(model => model.ImageLink)" alt="@Html.DisplayNameFor(model => model.Title)">
        </div>

        <div id="container" style="min-width: 510px; height: 400px; "></div>
    </div>
    <script>
            Highcharts.chart('container', {
                chart: {
                    type: 'line'
                },
                title: {
                    text: '@Html.DisplayFor(model => model.Title) Monthly Average Price'
                },
                subtitle: {
                    text: 'Source: StockX.com'
                },
                xAxis: {
                    color: '#0066FF',
                    categories: @Html.Raw(Json.Serialize(ViewData["FieldsList2"]))
                },
                yAxis: {
                    color: '#0066FF',
                    title: {
                        text: 'Value ($)'
                    }
                },
                plotOptions: {
                    line: {
                        color: '#32CD32',
                        dataLabels: {
                            enabled: true
                        },
                        enableMouseTracking: false
                    }
                },
                series: [{
                    name: '@Html.DisplayFor(model => model.Title)',
                    data: @Html.Raw(Json.Serialize(ViewData["FieldsList"]))
                }]
            });
    </script>

    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Title)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Title)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.PieceType)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.PieceType)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.RetailPrice)
        </dt>
        <dd class="col-sm-10 font-weight-bold">
            $@Html.DisplayFor(model => model.RetailPrice)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.AveragePrice)
        </dt>
        @if (Model.AveragePrice >= Model.RetailPrice)
        {
        <dd style="color: forestgreen;" class="col-sm-10 font-weight-bold">
            $@Html.DisplayFor(model => model.AveragePrice)
        </dd>
        }
        else
        {
        <dd style="color: red;" class="col-sm-10 font-weight-bold">
            $@Html.DisplayFor(model => model.AveragePrice)
        </dd>
        }
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Premium)
        </dt>
        @if (Model.Premium >= 0)
        {
        <dd style="color: forestgreen;" class="col-sm-10 font-weight-bold">
            @Html.DisplayFor(model => model.Premium)%
        </dd>
        }
        else
        {
        <dd style="color: red;" class="col-sm-10 font-weight-bold">
            @Html.DisplayFor(model => model.Premium)%
        </dd>
        }
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ReleaseDate)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.ReleaseDate)
        </dd>
    </dl>
    @if (SignInManager.IsSignedIn(User))
    {
    <a style="background-color: #4800ff; color: white; " class="btn font-weight-bold" asp-controller="UserPieces" asp-action="Create" asp-route-id="@Model.ID">Add To Closet</a>
    }
    else
    {
    <a style="background-color: #4800ff; color: white; " class="btn font-weight-bold" asp-area="Identity" asp-page="/Account/Login">Login To Add To Your Closet</a>
    }
    |  <a style="color: #4800ff" asp-action="Index">Back to Browse</a>

</div>
<div>

</div>
